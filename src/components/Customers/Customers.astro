---
import { Image } from "astro:assets";

import Score from "./Score.astro";

import coelhoKawaii from "../../assets/customers-images/coelho.png";

import Promo from "../Promo/Promo.astro";

const arrCustomers = [
  {
    id: 0,
    title: "Fernanda Robalo",
    details: "Torta de queijo cremosa com calda ou geleia de morango por cima.",
    userScore: 4,
  },
  {
    id: 1,
    title: "Mariana Dias",
    details:
      "Um bolo macio com um distintivo sabor de cacau e cor vermelha, coberto com cream cheese.",
    userScore: 5,
  },
  {
    id: 2,
    title: "Segio Gol√ßalvez",
    details:
      "Massa folhada recheada com creme de baunilha ou chocolate e coberta com ganache.",
    userScore: 5,
  },
  {
    id: 3,
    title: "Lima Dias",
    details:
      "Base de massa crocante, recheio c√≠trico de lim√£o e merengue dourado por cima.",
    userScore: 4,
  },
  {
    id: 4,
    title: "Augusta Francista",
    details:
      "Biscoitos leves de am√™ndoa com recheio de ganache ou geleia de framboesa.",
    userScore: 4,
  },
  {
    id: 5,
    title: "Marta N√°polis",
    details:
      "Vers√£o sofisticada do cl√°ssico brasileiro, com coberturas como castanhas, chocolate belga ou frutas.",
    userScore: 5,
  },
];
---

<section
  aria-labelledby="customers-heading"
  role="region"
  class="min-h-screen overflow-hidden flex flex-col gap-[10vh] p-8 pl-1 pr-0 bg-[#f2e6ff] sm:gap-[12vh] relative bluePattern bg-cover border-1 border-t-0"
>
  <h2
    id="customers-heading"
    class="text-5xl text-center text-new-pink font-semibold pl-4 pr-4 lg:text-6xl text-outline"
  >
    O que as <br class="md:hidden" />clientes dizem
  </h2>
  <div class="relative md:self-center">
    <section
      class="stop-animation flex overflow-x-auto gap-4 p-2 md:rounded-4xl md:max-w-[960px] lg:max-w-[1200px] md:overflow-hidden md:gap-6 fade-sides"
    >
      <div class="show-animation obey-animation flex gap-4 md:gap-6">
        {
          arrCustomers.map((item) => (
            <article class="flex flex-col gap-5 min-w-70 h-70 bg-[#ffffff] rounded-3xl p-4 pt-10 border-1 mb-2 md:mb-0 md:min-w-80 md:min-h-80 md:gap-6 md:pt-14">
              <header>
                <h3 class="font-extrabold text-xl text-center text-[#d94694] font-comfortaa md:text-2xl">
                  {item.title}
                </h3>
              </header>
              <section>
                <p class="font-bold text-center line-clamp-3 pl-2 pr-4  text-[#4d4d4d] font-nunito ">
                  {item.details}
                </p>
              </section>
              <footer class="flex justify-center items-center">
                <Score rating={item.userScore} />
              </footer>
            </article>
          ))
        }
      </div>
      <div
        class="hidden show-animation obey-animation md:flex gap-4 md:gap-6"
        aria-hidden="true"
      >
        {
          arrCustomers.map((item) => (
            <article class="flex flex-col gap-4 min-w-70 h-70 bg-[#ffffff] rounded-3xl p-4 pt-10 border-1 md:min-w-80 md:min-h-80 md:gap-6 md:pt-14">
              <header>
                <h3 class="font-extrabold text-xl text-center text-[#d94694] font-comfortaa md:text-2xl">
                  {item.title}
                </h3>
              </header>
              <section>
                <p class="font-bold text-center line-clamp-3 pl-2 pr-4  text-[#4d4d4d] font-nunito">
                  {item.details}
                </p>
              </section>
              <footer class="flex justify-center items-center">
                <Score rating={item.userScore} />
              </footer>
            </article>
          ))
        }
      </div>
    </section>
    <div
      class="hidden xl:block absolute w-full min-w-[1280px] -bottom-8 -left-10 self-center"
    >
      <Image
        src={coelhoKawaii}
        alt="Ilustra√ß√£o de um coelho branco fofo e sorridente acenando, como um mascote."
        class="object-contain w-40 h-auto left-0 bottom-0 absolute z-10"
        format="avif"
      />
      <Image
        src={coelhoKawaii}
        alt="Ilustra√ß√£o de um coelho branco fofo e sorridente acenando, como um mascote, virado para a direita."
        class="object-contain w-40 h-auto right-0 bottom-0 absolute z-10 scale-x-[-1]"
        format="avif"
      />
    </div>
  </div>
  <div class="self-center p-2">
    <p
      class="text-center font-medium text-[#333333] max-w-[500px] md:max-w-[600px] sm:text-lg text-shadow-sm"
    >
      Nossas clientes est√£o encantadas com cada doce feito com carinho e
      dedica√ß√£o. Cada bolo, cada sobremesa, cada detalhe √© pensado para
      transformar momentos especiais em mem√≥rias inesquec√≠veis. A felicidade
      delas √© o ingrediente mais importante da nossa confeitaria!
    </p>
  </div>
  <Promo
    title="Bolos gostosos feitos no ponto üòã"
    description="Desconto de 10% em compras de bolos de morango!"
    icone="kawaii-cake"
    produto="produto-bolo"
  />
</section>

<style>
  section {
    scrollbar-color: #e60073 transparent;
    scrollbar-width: thin;
  }

  @media (min-width: 768px) {
    .show-animation {
      animation: scroll 30s linear infinite;
    }

    .stop-animation:hover .show-animation {
      /* Garante que a anima√ß√£o pare apenas quando o pai est√° em hover */
      animation-play-state: paused;
    }

    /* Removido .obey-animation pois o comportamento j√° est√° no .show-animation e no :hover */
  }

  @keyframes scroll {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-100%);
    }
  }
</style>
